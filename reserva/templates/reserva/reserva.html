<!DOCTYPE html>
<html lang="es">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">-->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">

    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">


    <link href="https://fonts.googleapis.com/css?family=Kanit|Oswald|Quicksand|Righteous&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
          integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

    <link rel=icon href={% static 'images/icono2.png' %} sizes="any" type="image/svg+xml">
    <title>Ikigai</title>

    <link rel="stylesheet" href="{% static 'css/style.css' %}">

</head>

<body id="reserva" data-spy="scroll" data-target=".menu" data-offset="60">
<!--Menu-->
<nav class="navbar navbar-expand-md navbar-dark sticky-top">
    <a class="brand mr-2" href="#reserva"><img src="{% static 'images/icono.png' %}" alt="logo"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse menu" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                <a class="nav-link" href="{% url 'ikigai:index' %}">Ikigai</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" href="{% url 'reserva:reserva' %}">Reservas</a>
            </li>
        </ul>
        <form class="form-inline">
            {% if user.is_authenticated %}
                <a class="btn btn-sm btn-outline-light mr-2" href="{% url 'profile' %}">Perfil</a>
                <a class="btn btn-sm btn-outline-light" href="{% url 'logout' %}">Cerrar Sesion</a>
            {% else %}
                <a class="btn btn-sm btn-outline-light" href="{% url 'login' %}">Iniciar Sesion</a>
            {% endif %}
        </form>
    </div>
</nav>
<!--/Menu-->

{% if messages %}
    {% for message in messages %}
        <div class="profile-alert alert alert-{{ message.tags }}" style="font-size: 2.5vmin;">
            {{ message }}
        </div>
    {% endfor %}
{% endif %}

{% block content %}

{% endblock %}

<!--Box-->
<div class="section shadow-lg" id="box">
    <h2 class="title text-center">Reservas</h2>
    <div class="row justify-content-center">
        {% if boxes %}
            {% for b in boxes %}
                <div class="col-sm-6 col-md-4 col-lg-3">
                    <div class="box_grid shadow">
                        <figure class="block-reveal">
                            <img src="{{ b.imagen.url }}" class="img-fluid" alt="">
                            <div class="price">{{ b.nombrebox }}</div>
                        </figure>
                        <div class="wrapper">
                            <small>Equipamiento</small>
                            <p>{{ b.contenido }}</p>
                            <small>Espacial para:</small>
                            <p>{{ b.proposito }}</p>
                        </div>
                        <ul>
                            <li>
                                <div class="btn-reserva" id="{{ b.id }}" data-toggle="modal"
                                     data-target="#{{ b.nombrebox }}">Reservar Ahora
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

                <div id="{{ b.nombrebox }}" class="modal fade" tabindex="-1" role="dialog"
                     aria-labelledby="gridModalLabel" style="display: none;" aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="gridModalLabel">{{ b.nombrebox }}</h5>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid bd-example-row">
                                    <div class="row">
                                        <div class="col-12">
                                            <div class="container">
                                                <div class="row justify-content-center">
                                                    <div class="col-12 col-lg-6 mb-4">
                                                        <div class="calendar-container">
                                                            <div class="calendar">
                                                                <div class="year-header">
                                                                    <span class="left-button" id="prev"> &lang; </span>
                                                                    <span class="year" id="label"></span>
                                                                    <span class="right-button" id="next"> &rang; </span>
                                                                </div>

                                                                <table class="months-table">
                                                                    <tbody>
                                                                    <tr class="months-row">
                                                                        <td class="month">Ene</td>
                                                                        <td class="month">Feb</td>
                                                                        <td class="month">Mar</td>
                                                                        <td class="month">Abr</td>
                                                                        <td class="month">May</td>
                                                                        <td class="month">Jun</td>
                                                                        <td class="month">Jul</td>
                                                                        <td class="month">Ago</td>
                                                                        <td class="month">Sep</td>
                                                                        <td class="month">Oct</td>
                                                                        <td class="month">Nov</td>
                                                                        <td class="month">Dic</td>
                                                                    </tr>
                                                                    </tbody>
                                                                </table>

                                                                <table class="days-table">
                                                                    <td class="day">Dom</td>
                                                                    <td class="day">Lun</td>
                                                                    <td class="day">Mar</td>
                                                                    <td class="day">Mie</td>
                                                                    <td class="day">Jue</td>
                                                                    <td class="day">Vie</td>
                                                                    <td class="day">Sab</td>
                                                                </table>

                                                                <div class="frame">
                                                                    <table class="dates-table">
                                                                        <tbody class="tbody">

                                                                        </tbody>
                                                                    </table>
                                                                </div>

                                                                <button class="button" id="add-button">Add Event</button>

                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-12 col-lg-6">
                                                        <div class="events-container">

                                                        </div>
                                                    </div>

                                                </div>

                                                <div class="dialog" id="dialog">

                                                    <h2 class="dialog-header"> Add New Event </h2>

                                                    <form class="form" id="form">

                                                        <div class="form-container">
                                                            <label class="form-label" id="valueFromMyButton" for="name">Event name</label>
                                                            <input class="input" type="text" id="name" maxlength="36">
                                                            <label class="form-label" id="valueFromMyButton" for="count">Number of people to invite</label>
                                                            <input class="input" type="number" id="count" min="0" max="1000000" maxlength="7">
                                                            <input type="button" value="Cancel" class="button" id="cancel-button">
                                                            <input type="button" value="OK" class="button" id="ok-button">
                                                        </div>

                                                    </form>

                                                </div>

                                            </div>
                                            <!-- Dialog Box-->
                                        </div>

                                    </div>

                                    <div class="row">
                                        <div class="col-12">
                                            <div class="horas" id="{{ b.id }}"></div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                                <button type="button" class="btn btn-primary">Reservar</button>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>Agregar Box</p><i class="far fa-grin-beam-sweat"></i>
        {% endif %}
    </div>
</div>
<!--/Box-->


</body>
<!--Footer-->
<footer class="footer text-center">
    <div class="pt-3">
        <a href="#reserva">
            <i class="fas fa-angle-up "></i>
        </a>
    </div>
    <ul class="pt-3 social">
        <li class="list-inline-item">
            <p>Siguenos en</p>
        </li>
        <li class="list-inline-item">
            <a href="https://www.facebook.com/Centro-Ikigai-263378267525965/?ref=settings"
               class="btn-floating btn-fb mx-1">
                <i class="fab fa-facebook-f"></i>
            </a>
        </li>
        <li class="list-inline-item">
            <a href="https://www.instagram.com/centroikigai/" class="btn-floating btn-dribbble mx-1">
                <i class="fab fa-instagram"></i>
            </a>
        </li>
    </ul>
    <div class="footer-copyright p-3">Todos los derechos reservados | Centro Ikigai 2018
    </div>
</footer>
<!--/Footer-->


<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<!--
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
-->
<script src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
</script>

<script src="{% static 'js/calendar.js' %}"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<!--
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
-->

<script src="{% static 'js/jquery-3.3.1.slim.min.js' %}"></script>
<!--<script src="{% static 'js/popper.min.js' %}"></script>-->
<script src="{% static 'js/bootstrap.min.js' %}"></script>

<script src="{% static 'js/jquery.min.js' %}"></script>

<!--Smooth scroll-->
<script>
    $(document).ready(function () {
        // Add smooth scrolling to all links in navbar + footer link
        $(".navbar a, .footer a[href='#reserva']").on('click', function (event) {
            // Make sure this.hash has a value before overriding default behavior
            if (this.hash !== "") {
                // Prevent default anchor click behavior
                event.preventDefault();

                // Store hash
                let hash = this.hash;

                // Using jQuery's animate() method to add smooth page scroll
                // The optional number (900) specifies the number of milliseconds it takes to scroll to the specified area
                $('html, body').animate({
                    scrollTop: $(hash).offset().top
                }, 900, function () {

                    // Add hash (#) to URL when done scrolling (default click behavior)
                    window.location.hash = hash;
                });
            } // End if
        });
    });
</script>

<!--Oculta mensajes de alerta-->
<script>
    $(document).ready(function () {
        $(".alert-success").fadeTo(7000, 0).slideUp(500, function () {
            $(".alert-success").slideUp(500);
        });
    });
</script>

<script>

    var btnReserva = document.getElementsByClassName('btn-reserva');
    var hora = document.getElementsByClassName("horas");

    for (let i of btnReserva) {
        i.onclick = function () {
            for (let x of hora) {
                if (i.id === x.id) {
                    x.innerHTML = "";
                    fetch('http://127.0.0.1:8000/horas/')
                        .then(res => res.json())
                        .then(data => {
                            for (let indice of data) {
                                x.innerHTML += `<a href="#"><div id="${indice.idHora}">${indice.hora}</div></a>`;
                            }
                        });
                }
            }
        };
    }
</script>
